<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>d3</title>

  <script src="https://d3js.org/d3.v3.min.js"></script>
</head>

<body>
  <button onclick="go()">go</button>
  <br>

  <script>
    const svg = d3.select('body').append('svg')
      .attr({
        width: '400px',
        height: '250px',
      });

    const box1 = svg.append('rect')
      .attr({ x: 100 });
    
    const box2 = svg.append('rect')
      .attr({ x: 200 });

    const box3 = svg.append('rect')
      .attr({ x: 300 });

    svg.selectAll('rect')
      .attr({
        width: '90px',
        height: '90px',
      });

    box1.attr({
      fill: 'red',
    });

    box2.attr({
      fill: 'green',
    });

    box3.attr({
      fill: 'blue',
    });
      
    const go = () => {
      svg.selectAll('rect')
        .attr({
          y: 0,
        });

      box1.transition()
        .attr({
          y: 100,
        });

      box2.transition()
        .duration(1500)
        .attr({
          y: 100,
        });

      box3.transition()
        .duration(1500)
        .delay(1000)
        .attr({
          y: 100,
        });
    };

    go();
  </script>

</body>

</html>
